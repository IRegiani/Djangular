
<!-- COLOCAR OUTRA COISA... SOH FAZ SENTIDO BUSCAR ALUNO POR AULA... -->

<nav class="nav">
  <button class="btn btn-primary" routerLink="/home/true">Voltar</button>
  <h2 class="tit">Chamada</h2>
</nav>

<!-- <div class="subt" id="subt">
  <h3> Procurar Aluno </h3>
</div> -->

<body>
  <!-- <form class="form-inline md-form form-sm active-cyan-2">
    <input class="form-control form-control-sm mr-3 w-75" type="text" placeholder="Nome do Aluno" aria-label="Search"
      mdbInput>
    <i class="fas fa-search" aria-hidden="true"></i>
    <button class="buttonSearch">Buscar</button>
  </form> -->

  <div>
    <div *ngFor="let aula of aulasToday; let i = index">

        <mat-accordion (click)="populateStudents(aula.id)">
            <!-- <mat-expansion-panel (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false"> -->
            <mat-expansion-panel [expanded]="expandCollapse(aula.id)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Aula {{i + 1}}
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Currently I am {{panelOpenState ? 'open' : 'closed'}}
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <!-- <p>{{aula/Assunto}}</p> -->
              <span secondary>{{aula.Assunto}}</span>

                  <mat-expansion-panel>
                    <mat-expansion-panel-header>
                      <mat-panel-title> QR Code </mat-panel-title>
                      <mat-panel-description> Primeira Presença </mat-panel-description>
                    </mat-expansion-panel-header>
                   
                    <mat-form-field>
                        <input id="presenca1" type="password" placeholder="Senha" matInput showHideInput (keyup)="onKey($event)">
                      </mat-form-field>
                      <button type="submit" (click)="passwordCheck(aula.id, true)">Revelar QR Code</button>
                      <ngx-qrcode *ngIf="showQRA" [qrc-value]="qrCodeA"></ngx-qrcode>
      
                  </mat-expansion-panel>

                  <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title> QR Code </mat-panel-title>
                        <mat-panel-description> Segunda Presença </mat-panel-description>
                      </mat-expansion-panel-header>
                     
                      <mat-form-field>
                          <input id="presenca2" type="password" placeholder="Senha" matInput showHideInput (keyup)="onKey($event)">
                        </mat-form-field>
                        <button type="submit" (click)="passwordCheck(aula.id, false)">Revelar QR Code</button>
                        <ngx-qrcode *ngIf="showQRB" [qrc-value]="qrCodeB"></ngx-qrcode>
                    </mat-expansion-panel>
                
              <li *ngFor="let aluno of alunosDaAula; let j = index">
                  <span><b>{{aluno.Pessoas.Name}}</b></span>
                  <button class="presente" [ngStyle]="{'color': 'green'}" (click)="studentAttendendance(j, true)">Presente</button>
                  <button class="ausente" [ngStyle]="{'color': 'red'}" (click)="studentAttendendance(j, false)">Ausente</button>
                  <span><b>
                    {{aluno.Contador}}/2
                  </b></span>
              </li>

              <button class="buttonSearch" (click)="goToAddStudent(aula.id)">Adicionar Aluno</button>
            </mat-expansion-panel>
          </mat-accordion>

    </div>

  </div>
</body>